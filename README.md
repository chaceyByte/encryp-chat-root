# 🔒 加密聊天室

一个基于 Vue 3、TypeScript 和 WebSocket 的实时加密聊天室应用，支持多用户实时通信、消息加密、图片发送等功能。

## ✨ 核心功能

- **🔐 密钥认证机制**：用户通过输入相同密钥进入同一聊天室
- **💬 实时聊天功能**：基于 WebSocket 的即时消息传输
- **🔒 消息加密**：使用 AES 加密算法保护消息内容
- **🖼️ 图片发送**：支持粘贴图片并直接发送
- **👥 用户管理**：显示在线用户列表、用户加入/离开通知
- **💬 消息布局**：根据发送者自动调整消息位置（自己的消息在右侧，他人的在左侧）
- **⏰ 消息状态**：每条消息显示用户名和时间戳

## 🛠️ 技术栈

- **前端**：Vue 3、TypeScript、Tailwind CSS
- **通信**：WebSocket（客户端 + Node.js 服务器）
- **加密**：CryptoJS
- **UI组件**：FontAwesome
- **构建工具**：Vite

## 📁 项目结构

```
chat-room/
├── src/
│   ├── components/          # 可复用组件
│   │   └── ChatRoom.vue     # 聊天室主组件
│   ├── composables/         # 组合式 API
│   │   └── useChat.ts       # 聊天功能逻辑
│   ├── utils/               # 工具函数
│   │   └── formatTime.ts    # 时间格式化
│   ├── types/               # TypeScript 类型定义
│   │   └── chat.ts          # 聊天相关类型
│   ├── App.vue              # 根组件
│   ├── main.ts              # 应用入口
│   └── style.css            # 全局样式
├── server/
│   └── server.ts            # WebSocket 服务器
├── package.json
├── vite.config.ts
└── README.md
```

## 🚀 快速开始

### 1. 安装依赖

```bash
pnpm install
```

### 2. 启动应用

#### 方式一：分别启动（推荐开发）

```bash
# 终端1：启动 WebSocket 服务器
pnpm dev:server

# 终端2：启动前端开发服务器
pnpm dev:client
```

#### 方式二：同时启动

```bash
pnpm dev
```

### 3. 访问应用

打开浏览器访问 `http://localhost:5173`

## 💡 使用说明

1. **进入聊天室**：
   - 输入用户名和房间密钥
   - 点击"进入聊天室"按钮

2. **发送消息**：
   - 在输入框中输入文本消息
   - 按 `Enter` 键发送，或点击"发送"按钮
   - 支持 `Shift + Enter` 换行

3. **发送图片**：
   - 复制图片到剪贴板
   - 在输入框中粘贴（Ctrl+V）
   - 或点击图片图标手动粘贴

4. **查看在线用户**：
   - 左侧边栏显示当前在线用户列表
   - 绿色圆点表示用户在线状态

## 🔧 开发说明

### 项目配置

- **端口配置**：前端默认端口 5173，WebSocket 服务器默认端口 8080
- **热重载**：开发时支持热重载，修改代码自动刷新
- **TypeScript**：完整的类型支持，提高开发效率

### 加密机制

- 使用 AES 加密算法
- 房间密钥作为加密密钥
- 消息在传输前加密，接收后解密
- 仅相同密钥的用户可以解密消息

### WebSocket 协议

服务器支持的消息类型：

- `join`：用户加入房间
- `leave`：用户离开房间  
- `message`：发送聊天消息
- `user_joined`：用户加入通知
- `user_left`：用户离开通知
- `user_list`：用户列表更新
- `error`：错误消息

## 🎯 特色亮点

- **安全可靠**：端到端加密，保障通信隐私
- **用户体验**：响应式设计，支持图片粘贴
- **实时性强**：WebSocket 实现毫秒级消息传输
- **错误处理**：完善的连接异常处理和重连机制
- **现代化 UI**：基于 Tailwind CSS 的现代化界面设计

## 📝 注意事项

1. 确保 WebSocket 服务器（端口 8080）正常运行
2. 同一房间的用户必须使用相同的密钥
3. 图片发送功能依赖浏览器剪贴板 API
4. 建议在 HTTPS 环境下使用以获得更好的安全性

## 🔮 未来规划

- [ ] 支持文件传输
- [ ] 添加消息撤回功能
- [ ] 实现聊天记录保存
- [ ] 添加房间密码保护
- [ ] 支持消息搜索
- [ ] 添加主题切换功能

## 📄 许可证

MIT License